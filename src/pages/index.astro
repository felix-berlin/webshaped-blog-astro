---
import DefaultLayout from '@layouts/DefaultLayout.astro'

import BlogPostPreview from '@components/BlogPostPreview.vue';
import { getPostsPreview, getPageBySlug } from '@lib/api';

const index = await getPageBySlug('blog-index');

const posts = await getPostsPreview();
---
<DefaultLayout content={index}>
  <section class="intro">
    <h1>{index.title}</h1>
  </section>
  <section aria-label="Blog post list">
    <BlogPostPreview posts={posts} client:visible></BlogPostPreview>
  </section>
</DefaultLayout>

<style>
	.content {
		margin-top: 4rem;
		margin-bottom: 8rem;
	}

	.intro {
		padding-bottom: 4rem;
		margin-bottom: 2rem;
		border-bottom: 4px solid var(--theme-divider);
	}

	h1 {
		font-size: 2.5rem;
		font-weight: 700;
	}
</style>
