---
import SocialList from "@components/SocialList.vue";
import Menu from "@components/Menu.vue";
import GreenHosted from "@components/GreenHosted.vue";
import { getMenuById, getAuthor, getAllCategories } from "@lib/api";
import { version } from "./../../package.json";
import "../styles/objects/_footer.scss";
import { __ } from "@i18n/i18n";

const categories = await getAllCategories();
const footerMenuItems: object = await getMenuById(38);
const author = await getAuthor();

interface MainFooterProps {
  lang: {
    locale: string;
  };
}

const iconStyles = {
  size: 40,
  strokeWidth: 1,
};

const socialItems = {
  facebook: {
    url: author.user.seo.social.facebook,
    ...iconStyles,
  },
  instagram: {
    url: author.user.seo.social.instagram,
    ...iconStyles,
  },
  linkedIn: {
    url: author.user.seo.social.linkedIn,
    ...iconStyles,
  },
  mySpace: {
    url: author.user.seo.social.mySpace,
    ...iconStyles,
  },
  pinterest: {
    url: author.user.seo.social.pinterest,
    ...iconStyles,
  },
  soundCloud: {
    url: author.user.seo.social.soundCloud,
    ...iconStyles,
  },
  twitter: {
    url: author.user.seo.social.twitter,
    ...iconStyles,
  },
  wikipedia: {
    url: author.user.seo.social.wikipedia,
    ...iconStyles,
  },
  youTube: {
    url: author.user.seo.social.youTube,
    ...iconStyles,
  },
  github: {
    url: author.user.socialAdvanced.github,
    rel: "me",
    ...iconStyles,
  },
};

const { lang } = Astro.props as MainFooterProps;
---

<footer class="o-footer">
  <SocialList
    class:list={"o-footer__social-list"}
    socialItems={socialItems}
    lang={lang}
    client:visible
  />

  <div class="o-footer__end">
    <div class="o-footer__logo">
      <img
        src="/assets/logo/web_shaped_logo_2023_whail_trans_white_outline_no-spacing.svg"
        alt="Web Shaped Logo - Wal"
        width="150"
        height="103"
        loading="lazy"
      />
    </div>

    <div class="o-footer__categories">
      <h3 class="o-footer__headline">
        {__(lang.locale, "footer.headline.categories")}
      </h3>
      <menu class="c-menu c-menu--footer-two-columns u-list-reset">
        {
          categories.nodes.map((category) => (
            <li class="c-menu__item">
              <a class="c-menu__link" href={`/category/${category.slug}`}>
                {category.name}
              </a>
            </li>
          ))
        }
      </menu>
    </div>
    <div class="o-footer__other">
      <h3 class="o-footer__headline">
        {__(lang.locale, "footer.headline.other")}
      </h3>
      <Menu
        class:list={"o-footer__menu c-menu--footer"}
        menuItems={footerMenuItems.menuItems}
      />
    </div>
    <div class="o-footer__quote">
      <figure>
        <blockquote>
          „If debugging is the process of removing software bugs, then
          programming must be the process of putting them in.“
        </blockquote>
        <figcaption>
          —Edsger W. Dijkstra, <cite>(1930 – 2002)</cite>
        </figcaption>
      </figure>
    </div>
    <div class="o-footer__infos">
      <div class="o-footer__credits">
        © 2015 - {__(lang.locale, "footer.copyright.now")} Felix Scholze
      </div>
      <a
        href="https://github.com/felix-berlin/webshaped-blog-astro/releases"
        class="o-footer__version"
        target="_blank"
        title="Github Releases Seite">Website Version: {version}</a
      >

      <GreenHosted lang={lang} />
    </div>
  </div>
</footer>
